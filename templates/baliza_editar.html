<!-- BALIZAS - CREAR Y EDITAR) -->
{% extends "layout.html" %}
{% set current_page = "balizas" %}

{% block content %}

<div class="max-w-xl mx-auto card bg-white dark:bg-gray-800 rounded-xl shadow p-6">

    {% if modo == "crear" %}
    <h1 class="text-xl font-bold mb-4">Crear baliza digital</h1>
    {% else %}
    <h1 class="text-xl font-bold mb-4">Editar baliza</h1>
    {% endif %}

    <form method="post">

        <label class="block mb-2 font-semibold">Comentario:</label>
        <input type="text" name="comentario"
               class="w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"
               value="{{ baliza.comentario }}" required>

        <!--
        <label class="block mt-4 mb-2 font-semibold">Tipo:</label>
        <select name="tipo" class="input w-full" required>
            {% for t in ['TIPO1','TIPO2','TIPO3','TIPO4'] %}
                <option value="{{ t }}" {% if baliza.tipo == t %}selected{% endif %}>{{ t }}</option>
            {% endfor %}
        </select>
        -->
        <div>
            <label class="block mt-4 mb-2 font-semibold">
                Tipo:
            </label>

            <select name="tipo"
                    class="w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700">

                {% for t in tipos %}
                <option value="{{ t.nombre }}"
                        {% if baliza.tipo== t.nombre %}selected{% endif %}>
                    {{ t.nombre }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!--
        <label class="block mt-4 mb-2 font-semibold">Evento:</label>
        <select name="evento" class="input w-full" required>
            {% for ev in ['EVENTO1','EVENTO2','EVENTO3','EVENTO4'] %}
                <option value="{{ ev }}" {% if baliza.evento == ev %}selected{% endif %}>{{ ev }}</option>
            {% endfor %}
        </select>
        -->
        <div>
            <label class="block mt-4 mb-2 font-semibold">
                Evento:
            </label>

            <select name="evento"
                    class="w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700">

                {% for e in eventos %}
                <option value="{{ e.nombre }}"
                        {% if baliza.evento== e.nombre %}selected{% endif %}>
                    {{ e.nombre }}
                </option>
                {% endfor %}
            </select>
        </div>

        <!-- Servidor -->
        <div>
            <label class="block mt-4 mb-2 font-semibold">
                Servidor:
            </label>

            <select name="servidor"
                    class="w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-800
                   text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700">
                <option value="">-- Selecciona un servidor --</option>

                {% for s in servidores %}
                <option value="{{ s['nombre'] }}"
                        {% if baliza.servidor and baliza.servidor.strip().lower()== s[
                'nombre'].strip().lower() %}
                selected
                {% endif %}>
                {{ s['nombre'] }} â€” {{ s['ruta'] }}
                </option>
                {% endfor %}
            </select>
        </div>


        <label class="block mt-4 mb-2 font-semibold">Origen (UUID):</label>
        <input type="text" name="origen"
               class="w-full px-3 py-2 border rounded-lg bg-white dark:bg-gray-800
                       text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-700"
               value="{{ baliza.origen }}" required>

        <div class="mt-6 flex justify-between">
            <a href="{{ url_for('balizas.balizas') }}"
               class="px-4 py-2 bg-gray-500 text-white rounded">Cancelar</a>

            <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
                Guardar
            </button>
        </div>

    </form>

</div>

{% endblock %}
